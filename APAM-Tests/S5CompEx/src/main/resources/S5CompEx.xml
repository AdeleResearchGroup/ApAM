<apam xmlns="fr.imag.adele.apam" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:schemaLocation="fr.imag.adele.apam http://repository-apam.forge.cloudbees.com/release/schema/ApamCore.xsd" >    

	<composite name="S5CompEx" main="S5Impl" specification="S5"
		interfaces="[fr.imag.adele.apam.test.s5.S5,fr.imag.adele.apam.ApamComponent]">
		
		<dependency specification="S4" fail= "wait" exception="fr.imag.failedException" />
		
		<contentMngt>
			<state implementation="S5Impl" property="state"/>
			
			<start implementation="S3Impl" name="s3Impl-int">
				
				<property name="S3Impl-Attr" value="val"/>
			
				<dependency specification="S4">
					<constraints>
						<implementation filter="propre=true"/>
					</constraints>
				</dependency>
			
				<trigger>
					<specification name="la spec qui declenche le demmarage">
						<constraints>
							<constraint filter="la condition de demarrage"/>
						</constraints>
					</specification>
				</trigger>
			</start> 
			
			<promote implementation="A" dependency="fastS2" to="S2Single"/>
					
			<borrow implementation="(b=true)" instance="false"/>
			<local  implementation="true" instance="true"/>

			<own specification="S1" property="location" value="{entrance,exit}">
				<grant when="emergency" implementation="S1ImplTestAttr" />
				<grant when="threat" implementation="S2Impl" />
			</own>
			<own specification="S1" property="location" value="garage"/>
			
			<specification name="Spec_A*" eager="true" hide="true" exception="CompositeDependencyException">
				<constraints>
					<constraint filter="(apam-composite=true)" />
				</constraints>
				<preferences>
					<constraint filter="(SCOPE=GLOBAL)" />
				</preferences>
			</specification>
			
		</contentMngt>
	</composite>
</apam>
